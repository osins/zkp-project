# Project Structure

English | [ç®€ä½“ä¸­æ–‡](STRUCTURE_CN.md)

```
zkp-project/
â”‚
â”œâ”€â”€ ğŸ“„ README.md                      # Main documentation
â”œâ”€â”€ ğŸ“„ README_CN.md                   # Main documentation (Chinese)
â”œâ”€â”€ ğŸ“„ LICENSE                        # MIT License
â”œâ”€â”€ ğŸ“„ package.json                   # Root package.json (workspace)
â”œâ”€â”€ ğŸ“„ .gitignore                     # Git ignore configuration
â”œâ”€â”€ ğŸ“„ STRUCTURE.md                   # This file (Project structure)
â”œâ”€â”€ ğŸ“„ STRUCTURE_CN.md                # Project structure (Chinese)
â”œâ”€â”€ ğŸ“„ COMMANDS.md                    # Command reference
â”œâ”€â”€ ğŸ“„ COMMANDS_CN.md                # Command reference (Chinese)
â”œâ”€â”€ ğŸ“„ QUICKSTART.md                  # Quick start guide
â”œâ”€â”€ ğŸ“„ QUICKSTART_CN.md               # Quick start guide (Chinese)
â”œâ”€â”€ ğŸ“„ PROJECT_SUMMARY.md             # Project summary
â”œâ”€â”€ ğŸ“„ PROJECT_SUMMARY_CN.md          # Project summary (Chinese)
â”‚
â”œâ”€â”€ ğŸ“ rust-prover/                   # Rust proof generator (Halo2)
â”‚   â”œâ”€â”€ ğŸ“„ Cargo.toml                 # Rust dependencies configuration
â”‚   â”œâ”€â”€ ğŸ“„ README.md                  # Module documentation
â”‚   â”œâ”€â”€ ğŸ“„ README_CN.md               # Module documentation (Chinese)
â”‚   â”œâ”€â”€ ğŸ“„ CHANGELOG.md               # Changelog
â”‚   â”œâ”€â”€ ğŸ“„ CHANGELOG_CN.md            # Changelog (Chinese)
â”‚   â”œâ”€â”€ ğŸ“„ .gitignore
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ lib.rs                 # WASM interface and core logic
â”‚   â”‚   â””â”€â”€ ğŸ“„ circuit.rs             # Halo2 circuit definition (xÂ² = y)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ test/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test-wasm.js           # Complete test suite (15 tests)
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test-simple.js         # Simple debugging tests
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ README.md              # Test documentation
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ WASM_TEST_SUCCESS.md   # Test report
â”‚   â”‚   â””â”€â”€ ğŸ“„ test-results.txt       # Test results
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ pkg/                       # WASM output (generated by wasm-pack)
â”‚       â”œâ”€â”€ ğŸ“„ rust_prover.js
â”‚       â”œâ”€â”€ ğŸ“„ rust_prover_bg.wasm
â”‚       â””â”€â”€ ğŸ“„ rust_prover.d.ts
â”‚
â”œâ”€â”€ ğŸ“ circom-circuits/               # Circom circuits
â”‚   â”œâ”€â”€ ğŸ“„ package.json               # Node dependencies
â”‚   â”œâ”€â”€ ğŸ“„ .gitignore
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ circuits/
â”‚   â”‚   â””â”€â”€ ğŸ“„ example.circom         # Circom circuit (multiplication verification)
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ scripts/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ build_circuit.sh       # Circuit compilation script
â”‚   â”‚   â””â”€â”€ ğŸ“„ test_circuit.js        # Circuit testing script
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ build/                     # Build output (gitignored)
â”‚       â”œâ”€â”€ ğŸ“„ example.r1cs           # R1CS constraint file
â”‚       â”œâ”€â”€ ğŸ“„ example_final.zkey     # Proving key
â”‚       â”œâ”€â”€ ğŸ“„ verification_key.json  # Verification key
â”‚       â”œâ”€â”€ ğŸ“„ Verifier.sol           # Generated Solidity verifier
â”‚       â”œâ”€â”€ ğŸ“„ proof.json             # Sample proof
â”‚       â””â”€â”€ ğŸ“„ calldata.txt           # Solidity calldata
â”‚
â”œâ”€â”€ ğŸ“ node-sdk/                      # Node.js/TypeScript SDK
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json
â”‚   â”œâ”€â”€ ğŸ“„ .env.example
â”‚   â”œâ”€â”€ ğŸ“„ .gitignore
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ index.ts               # SDK main entry
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ proverClient.ts        # Proof generation client
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ verifierClient.ts      # Verification client
â”‚   â”‚   â””â”€â”€ ğŸ“„ contractClient.ts      # Smart contract interaction client
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ scripts/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ generateProof.ts       # Proof generation script
â”‚   â”‚   â””â”€â”€ ğŸ“„ verifyProof.ts         # Proof verification script
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ dist/                      # TypeScript compilation output
â”‚
â”œâ”€â”€ ğŸ“ smart-contracts/               # Solidity smart contracts
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ hardhat.config.js          # Hardhat configuration
â”‚   â”œâ”€â”€ ğŸ“„ .env.example
â”‚   â”œâ”€â”€ ğŸ“„ .gitignore
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ contracts/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Verifier.sol           # Groth16 Verifier contract
â”‚   â”‚   â””â”€â”€ ğŸ“„ ZKPApplication.sol     # ZKP application example contract
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ scripts/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ deploy.js              # Contract deployment script
â”‚   â”‚   â””â”€â”€ ğŸ“„ verify-on-chain.js     # On-chain verification script
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ test/
â”‚   â”‚   â””â”€â”€ ğŸ“„ Verifier.test.js       # Contract testing
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ artifacts/                 # Hardhat compilation output
â”‚   â””â”€â”€ ğŸ“ cache/                     # Hardhat cache
â”‚
â”œâ”€â”€ ğŸ“ backend/                       # Backend API service (optional)
â”‚   â”œâ”€â”€ ğŸ“„ package.json
â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json
â”‚   â”œâ”€â”€ ğŸ“„ .env.example
â”‚   â”œâ”€â”€ ğŸ“„ .gitignore
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ src/
â”‚   â”‚   â””â”€â”€ ğŸ“„ server.ts              # Express.js API server
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ dist/                      # TypeScript compilation output
â”‚
â”œâ”€â”€ ğŸ“ scripts/                       # Global scripts
â”‚   â”œâ”€â”€ ğŸ“„ setup.sh                   # Project initialization script
â”‚   â”œâ”€â”€ ğŸ“„ build-all.sh               # Build all modules
â”‚   â”œâ”€â”€ ğŸ“„ test-all.sh                # Run all tests
â”‚   â”œâ”€â”€ ğŸ“„ demo.sh                    # Demo script
â”‚   â””â”€â”€ ğŸ“„ clean.sh                   # Clean build files
â”‚
â””â”€â”€ ğŸ“ reports/                       # Validation reports
    â”œâ”€â”€ ğŸ“„ 20251108150155_validation_report.yaml
    â””â”€â”€ ğŸ“„ 20251108154606_validation_report.yaml
```

## ğŸ“Š File Statistics

| Module | File Count | Primary Language |
|--------|------------|------------------|
| rust-prover | 14 | Rust |
| circom-circuits | 6 | Circom, JavaScript |
| node-sdk | 10 | TypeScript |
| smart-contracts | 11 | Solidity, JavaScript |
| backend | 5 | TypeScript |
| scripts | 6 | Bash |
| Documentation | 20+ | Markdown |
| **Total** | **72+** | Multi-language |

## ğŸ”‘ Key File Descriptions

### Rust Prover
- `lib.rs`: WASM interface exports and core proof/verification logic
- `circuit.rs`: Halo2 circuit definition, implements xÂ² = y verification
- `test/test-wasm.js`: Complete test suite (15 test cases)
- `test/test-simple.js`: Simple debugging tests

### Circom Circuits
- `example.circom`: Circom circuit, multiplication verification (a Ã— b = c)
- `build_circuit.sh`: Complete compilation process (R1CS â†’ zkey â†’ Verifier.sol)
- `test_circuit.js`: Circuit testing and proof generation

### Node SDK
- `proverClient.ts`: Encapsulates snarkjs proof generation
- `verifierClient.ts`: Off-chain verification interface
- `contractClient.ts`: ethers.js on-chain interaction

### Smart Contracts
- `Verifier.sol`: Groth16 verifier (generated by snarkjs)
- `ZKPApplication.sol`: Application example (points reward system)
- `deploy.js`: Hardhat deployment script

### Backend
- `server.ts`: RESTful API service
  - `POST /api/proof/generate`
  - `POST /api/proof/verify`
  - `POST /api/proof/export-calldata`

## ğŸ”„ Workflow

```
1. Design Circuit
   â†“
2. Compile Circuit (build_circuit.sh)
   â†’ Generate R1CS, WASM, zkey, Verifier.sol
   â†“
3. Generate Proof (generateProof.ts)
   â†’ Use snarkjs + circuit
   â†“
4. Off-chain Verification (verifyProof.ts)
   â†’ Fast verification (no blockchain needed)
   â†“
5. Deploy Contract (deploy.js)
   â†’ Hardhat deployment to chain
   â†“
6. On-chain Verification (verify-on-chain.js)
   â†’ Verify through smart contract
```

## ğŸ“¦ Dependencies

```
node-sdk â”€â”¬â”€â†’ circom-circuits (build outputs)
          â””â”€â†’ smart-contracts (ABI)

smart-contracts â”€â”€â†’ circom-circuits (Verifier.sol)

backend â”€â”€â†’ circom-circuits (build outputs)

rust-prover (independent module)
```